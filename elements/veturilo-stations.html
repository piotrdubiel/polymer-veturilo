<link rel="import" href="../components/core-header-panel/core-header-panel.html">
<link rel="import" href="../components/core-toolbar/core-toolbar.html">
<link rel="import" href="../components/core-icons/iconsets/image-icons.html">
<link rel="import" href="../components/paper-fab/paper-fab.html">
<link rel="import" href="search-input.html">
<link rel="import" href="station-list.html">

<polymer-element name="veturilo-stations" attributes="data">
    <template>
        <style>
            core-header-panel {
              height: 100%;
            }
            core-toolbar {
              background: #27568A;
              //#56BA89;
              background-image: none;
            }
            paper-fab.switch {
                position: fixed;
                bottom: 50px;
                right: 50px;
                background: #259b24;
                color: white;
            }
            paper-fab.chart {
                position: fixed;
                bottom: 50px;
                right: 120px;
                background: #d23f31;
                color: white;
            }
            @media (min-width: 800px) {
                paper-fab.switch {
                    right: 200px;
                }
                paper-fab.chart {
                    right: 280px;
                }
            }
        </style>
        <core-header-panel>

        <core-toolbar layout horizontal end-justified>
        <search-input id="search" flex></search-input>
        </core-toolbar>

        <station-list id="list" fit stations="{{ data.stations }}"></station-list>
        <paper-fab class="switch" icon="explore" raisedButton></paper-fab>
        <paper-fab class="chart" icon="image:timelapse" raisedButton></paper-fab>
        </core-header-panel>
    </template>
    <script>
    Polymer("veturilo-stations", {
        ready: function() {
            var search =  this.$.search;
            var list =  this.$.list;
            search.addEventListener("search-changed", function(e) {
                if (e.detail.text && e.detail.text != "") {
                    list.filter(new RegExp(e.detail.text, "i"));
                }
                else {
                    list.filter(null);
                }
            });
            search.addEventListener("search-tapped", function(e) {
                console.log(e);
            });
        },
        dataChanged: function() {
            console.log(this.data);
        }
    });
    </script>
</polymer-element>
